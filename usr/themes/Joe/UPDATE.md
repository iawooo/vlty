## Joe再续前缘更新日志

## 1.00

- 修复文章模块meta标签关键词和描述无自定义时为空
- 修复视频播放器视频路径带有&等特殊字符会发生错误
- 修复搜索、分类、标签等文章列表中 “找到 \* 篇与 \*\* 的结果” 中 \*\* 不显示的错误
- 修复移动端侧边栏图片封面右边多出的白色边框
- 修复友链页面站点介绍过多导致卡片高度不一的BUG
- 修复自定义多级分类的情况下网站地图生成url显示不正确的bug，暂时只支持2级分类
- 新增视频可设置自动播放，src路径带上参数 autoplay=true 即可
- 新增首页和其他页面文章可设置打开的窗口模式
- 新增展示百度站点统计功能
- 新增移动端侧边栏显示登录注册等操作
- 新增可设置QQ微信打开网站跳转浏览器的防红功能，打开后QQ内可直接调用QQ浏览器 UC浏览器 打开网址
- 新增开启关闭文章评论画图模式功能
- 新增首页文章列表可分别放置移动端和PC端谷歌广告代码，可设置两处展示位置或关闭
- 新增博主栏鼠标移入漂浮物可设置显示或隐藏
- 新增评论模块自动记住网址
- 新增评论模块评论失败后返回原因
- 新增必应收录推送
- 新增自定义站点引入文件源，可把静态文件存入云存储空间内，如：七牛云
- 优化大部分按钮背景颜色为渐变色
- 修改移动端同PC端一样会展示四个文章筛选项
- 修改文章模块H2标题和H3标题的左边框颜色为渐变色
- 优化页面初次进入时的加载速度，npm CDN转为Staticfile CDN
- 优化文章内H级标题上下边距，使其层次更加明确
- 优化文章内joe_message插件的上边距
- 部分文字颜色修改为渐变色
- 修改搜索按钮内英文文字为中文
- 优化移动端下站点公告隐藏为向下排序
- 优化文章内行内代码的蓝色背景显示高度
- 修改文章页面标签模块的选中下划线为渐变色

## 1.02

- 修复打开标签页设置没有包含置顶文章
- 优化检测收录算法，检测时出现进行安全验证页面直接判断为未收录
- 新增可开启对友链进行随机排序功能

## 1.04

- 去掉编辑器模块内插入图片和插入链接之后插入的内容两边空格，Test修改为空
- 去除压缩包内多余文件
- 移动端情况下侧边栏头像优化为圆形
- 新增移动端可设置侧边栏壁纸显示模式为半屏或全屏
- 新增可自定义侧边栏登录注册URL函数
- 优化移动端当页面已经往下滑动之后点击分类等栏目不会返回顶部
- 文章收录检测失败后改为手动提交收录

## 1.05

- 缩小文章页面列表模块的左边距
- 如果填写百度推送Token，那么文章页面检测百度收录失败后点击推送时使用Ajax提交收录
- 首页增加隐藏的H1标签，对搜索引擎更加友好
- 修复留言页面百度推送机制没有跟随文章页面的BUG
- 优化首页加载文章时如果没有文章的处理情况，DOM元素的修改看起来更加丝滑
- 文章模块新增导读功能

## 1.06

- 优化文章模块中竖向图片的显示高度
- 首页轮播图支持使用文章ID
- 右下角三个浮悬按钮背景颜色优化为60％透明的白色
- 页面头部导航优化为85%的毛玻璃效果透明
- 新增文章底部可自定义提示信息
- 新增首页轮播图可设置打开窗口方式

## 1.07

- 新增可设置首页大屏图片
- 新增可一键开启网站全局灰色模式
- 优化文章页面表格模块的排列宽度
- 新增邮箱评论通知点击查看可以直接查看定位到文章评论位置的评论
- 目录树窗口宽度算法优化
- 新增可在主题设置处一键检测更新

## 1.09

- 新增主题自带本站同款登录注册页面
- 优化引入静态资源算法
- 新增自动检测更新
- 修复黑暗模式下文章导读目录依然白色的BUG
- 优化文章导读目录遮罩层显示UI

## 1.1

- 新增主题自带随机一言API
- 优化主题设置处对设置项的描述更加明确
- 修改为默认开启首页顶部大图
- 优化登录注册模块

## 1.11

- 新增可设置文章页面顶部大图背景壁纸
- 新增文章页可无限插入广告
- 兼容PHP7.3 - 8.0
- 修复登录页面提示登录成功但实际没有登录的BUG
- 修复登录注册等页面的字体样式不跟随站点样式的BUG
- 优化注册和找回密码时邮箱发送错误的提示机制
- 新增如果主题没有配置邮箱那么用户注册时则无需验证码

## 1.12

- 优化打开文章导读目录后背景层的模糊效果
- 优化移动端侧边栏功能模块的背景为85％的白色透明效果 可配合壁纸高度功能使用全屏壁纸
- 新增可开启或关闭PC端导航栏背景毛玻璃效果（毛玻璃效果启动后部分PC端浏览页面可能会产生卡顿）
- 修复网站https协议情况时在主题设置处检测更新失败的BUG
- 新增文章页可开启顶部大图背景使用文章缩略图 文字将使用文字标题 如果没有文章没有缩略图那么使用首页顶部大图和侧边栏随机一言充当文字
- 对全局设置中自定义存储空间功能进行详细描述
- 新增在线友链申请功能，需要配置邮箱功能

## 1.13

- 修复部分站点展示百度统计数据出现 -- 的BUG
- 新增可开启页面顶部位置展示屏幕浏览进度条
- 新增可开启页面底部位置展示灵动的鱼群跳跃，增添网站灵动气氛
- 优化文章导读目录点击后的处理流程 采用描点拦截无感滚动定位技术
- 优化首页推荐文章的推荐卡片显示位置 为标题留出更多空间并将标题优化为剧中对齐显示
- 优化黑夜模式下的渐变背景颜色
- 修复文章摘要显示编辑器代码如：{lamp /} 等 Markdown 语法

## 1.14

- 修复统计页面查询文章归档时SQL版本大于或等于8的时候报错
- 屏幕浏览进度条位置优化到导航栏下方
- 优化检测百度是否收录文章的算法

## 1.15

- 新增更加灵动的经典表情包
- 文章页面评论模块PC端选择表情时鼠标悬停显示表情说明
- 新增主题编辑器自带展示所有标签列表并可点击填入标签功能
- 优化文章页面顶部大图的文字UI
- 优化首页推荐文章的推荐卡片中文字行高为居中
- 重构再续前缘版自带登录注册页面底层代码 大幅缩小样式文件大小并与全站UI融合
- 新增文字导读目录展示时的遮罩层动画 如果是PC端那么遮罩层不附带毛玻璃效果 以免卡顿

## 1.16

- 文章页面代码模块使用复制代码文字功能时代码文字中四个空格缩进优化为tab缩进方式
- 重构跳转浏览器打开页面UI
- 优化移动端打开文章导读后的阴影色彩
- 新增文章页面复制操作弹窗提醒文章版权
- 新增站点右下角可以显示SSL安全认证图标
- 新增自定义背景壁纸优化 开启后将对自定义背景壁纸模式下没有覆盖到的小地方的样式进行优化
- 编辑器后台新增一套我们常用的表情包
- 文章列表鼠标移入显示划入线条
- 新增移动端可选动态背景壁纸
- 新增动态星空背景壁纸

## 1.17

- 2022-09-04 22:17:36 星期日
- 新增6种全局飘落特效
- 首页UI全面重构优化
- 优化首页推荐文章可以无限 不再限制两个
- 优化文章页面底部推荐文章的鼠标移入动画
- 优化移动端下导航栏处搜索框样式
- 导航栏高度降低10px
- 可自定义首页热门文章显示数量
- 首页热门文章UI全新重构

## 1.18

- 2022-09-06 08:11:09 星期二
- 紧急修复主题设置页面报错提示

## 1.20

- 2022-11-19 23:32:06 星期六
- 新增可设置全局音乐播放，支持目前各大主流平台，支持播放类型有歌单、单曲、专辑、搜索结果、艺术家，支持是否自动播放（部分浏览器已禁用自动播放声音策略），支持列表播放顺序，支持自动寻找音乐主题色
- 修复防红页面显示打开地址错误
- 新增文章视频模块支持自动切换下一集，自动跟随主题色，支持播放器视频截图功能
- 更加细致的主题自定义设置分类
- 文章内插入网抑云单曲、歌单，插入外部音乐等模式可设置是否自动播放、播放循环顺序、播放顺序、自动寻找音乐主题色

## 1.30

- 2023-06-27 00:58:00 星期二
- 新增可设置全局音乐播放，支持目前各大主流平台，支持播放类型有歌单、单曲、专辑、搜索结果、艺术家，支持是否自动播放（部分浏览器已禁用自动播放声音策略），支持列表播放顺序，支持自动寻找音乐主题色
- 修复防红页面显示打开地址错误
- 新增文章视频模块支持自动切换下一集，自动跟随主题色，支持播放器视频截图功能
- 更加细致的主题自定义设置分类
- 文章内插入网抑云单曲、歌单，插入外部音乐等模式可设置是否自动播放、播放循环顺序、播放顺序、自动寻找音乐主题色
- 重构目录结构
- 静态资源本地化

## 1.31

- 2024-07-31 06:13:24 星期三
- 去除大部分jsdelivr资源链接，转为本地化，提升主题加载速度
- 支持PHP8.2
- 全局音乐播放器支持使用自定义API接口
- 新增系统内置全局音乐播放器解析

## 1.32

- 修复全局音乐Cookie功能
- 修复文章内网易云音乐功能
- 修复font-awesome资源失效的BUG
- 修复文章百度收录检测功能，直接对接API接口查询
- 修复主题部分PHP文件可被直接执行的重大漏洞
- 修复那年今日侧栏模块会显示本年文章的BUG
- 修复文章列表选中动画功能
- 修复移动端情况下文章评论的颜文字功能排版错乱的BUG
- 优化首页热门文章的UI
- 优化移动端侧边栏布局顶部间距
- 优化监听页面复制提示版权功能，只监听文章内的内容复制
- 优化页面底部悬浮小工具按钮的UI
- 优化文章页面、独立页面、首页的UI，参考自子比主题
- 优化全局加载动画
- 新增主题首页、文章详情页、分类页、标签页的反图片防盗链功能
- 新增全局设置自定义公共静态资源CDN功能
- 新增主题自带编辑器编写文章或页面的时候实时自动本地保存编辑的内容，不存储在typecho服务端，不占用数据库空间，无需担忧页面意外关闭，导致辛苦写的内容丢失的问题
- 新增全局音乐播放器会自动创建媒体元数据适配系统控制栏展示音乐标题和封面
- 新增推送百度文章时可检测是否推送过，推送过的文章不再重复推送
- 新增文章列表缩略图加载失败自动使用主题自带缩略图功能
- 新增文章导读小卡片内容横向超出后隐藏超出部分，纵向超出后会自动增加滚动条
- 新增友情链接页面友链头像加载失败后自动使用默认头像
- 新增文章可设置是否开启文章标题居中功能
- 新增网站顶部导航栏可单独设置夜间模式LOGO
- 新增PHP版本号强制检测，最低运行版本号7.4
- 新增可单独设置首页移动端热门文章显示数量功能
- 新增可单独设置首页移动端推荐文章
- 新增首页推荐文章可设置第二个样式风格和首页热门文章一样
- 友情链接在线申请模块新增验证码验证功能
- 主题设置的插入自定义代码功能迎来史诗级增强，新增自定义CSS代码和自定义JavaScript，支持代码高亮、代码提示、自动完成功能
- 全新重构文章导读功能底层代码和UI，根据文章内容自动生成文章目录，支持点击目录跳转到对应章节、目录自动切换到当前阅读的章节、目录跟随文章内容滚动

## 1.33

- 修复文章目录在其他自定义页面显示但是没有目录内容的BUG，已修改为只在默认页面和文章页显示
- 修复主题文件夹名称不为Joe的情况下无法备份主题设置的BUG
- 修复部分情况下首页推荐和热门文章列表发布时间显示不正确的BUG
- 修复关闭主题自带的注册登录功能后点登录会出404页面的BUG
- 修复PC端侧栏模块中那年今日和添狗日记的标题底下有白底的BUG
- 修复Joe文章编辑器的插入音乐模块部分功能BUG
- 修复Joe文章编辑器的普通表情模块没有经典表情选项的BUG
- 修复使用自定义字体后部分排版图标和字体不对齐的BUG
- 修复首页热门文章模块在少部分情况下时间显示异常的BUG
- 修复直播页面、用户登录注册页面、视频播放器模块的反射XSS漏洞
- 修复文章点赞功能可以重复发包变成负数的漏洞
- 修复部分情况的友链在线申请功能提示验证码过期的BUG
- 修复首页文章置顶后依然会再次重复出现这一篇文章的BUG
- 修复主题编辑器的评论可见模块中使用换行后可见内容多出上下边距的BUG
- 修复黑夜模式下 Aplayer 播放器颜色依然是亮白色的BUG
- 修复随机一言API只能识别 `//` 开头的网址不能识别 `http://` 和 `https://` 的BUG
- 修复首次启用主题时Typecho没有文章的情况下会启用失败的BUG
- 修复移动端侧栏中栏目内容高度超出屏幕高度的情况下向下滑动后底部背景壁纸空白的BUG
- 优化PC端侧栏文章导读的位置
- 优化友情链接在线申请的标题样式
- 优化首页轮播图高度
- 优化文章蓝凑云下载模块图标样式
- 优化meta标签中的description简介内容
- 优化文章列表中的文章摘要内容
- 优化首页UI
- 优化文章页面相关推荐模块的UI和功能
- 优化文章页面评论模块的标题UI
- 优化文章评论区的表情包图片为懒加载
- 优化广告模块中的图片为懒加载
- 优化画图评论的内容改为保存文件模式，不再大量占用数据库空间
- 优化文章编辑器内的文字大小
- 大幅度优化浏览器 JavaScript 监听窗口 Scroll 滚动事件的性能，解决微卡顿问题
- 新增文章页面H2标题鼠标移入动画
- 新增特效LOGO扫光功能
- 新增Joe文章编辑器自动恢复本地存储内容之前先询问是否恢复
- 新增文章赞赏功能
- 新增可设置用户注册默认等级功能
- 新增主题编辑器的视频播放器模块的文章视频校验，阻止外来视频使用本播放器
- 新增主题编辑器的视频播放器模块支持MPD、FLV、磁力链接（BT种子）格式的视频
- 新增首页文章列表可隐藏指定文章和分类功能
- 新增默认主题风格设置，可自动早六晚七切换昼夜模式，也可设置始终是一种模式
- 新增是否开启文章收录检测功能
- 新增文章隐藏内容付费可见功能
- 新增主题编辑器中云盘下载模块的夸克网盘类型
- 新增独立友情链接管理面板
- 新增独立支付订单管理面板
- 新增首页底部友情链接模块
- 新增代码预览模块行号展示
- 新增可关闭首页文章Ajax加载功能
- 新增登录评论功能
- 新增可关闭昼夜模式切换功能
- 新增文章外链重定向功能
- 新增自定义导航栏功能和自定义导航栏模式下全新的导航栏样式
- 新增太极八卦、原神启动、随机设备等加载动画
- 新增文章编辑器中多彩按钮和便条按钮的链接打开方式设置
- 全新的云盘下载模块图标，让人看起来焕然一新
- 全新的页脚底栏UI和设置，UI更美功能更多
- 全新重构文章剧集模块
- 全新的经典表情包
- 本地化公共静态资源，可选择使用本地资源或者CDN接口
- 增加更多公共静态资源CDN接口
- 升级首页大屏广告从之前的只能一个升级为一行一个
- 升级文章代码高亮组 Prism.js
- 升级文章代码内容复制到剪切板的组件 Clipboard.js
- 升级首页轮播图组件 Swiper.js

## 1.34 公测版

- 新增评论区内容自动刷新功能
- 新增文章页面可设置PC端文章内图片极限高度
- 新增自定义文章页头部HTML代码功能，支持Joe编辑器语法
- 新增自定义文章页底部HTML代码功能，支持Joe编辑器语法
- 新增自定义文章页下方版权声明HTML代码功能
- 新增首页轮播图支持使用MP4视频轮播
- 新增智能判断文章编辑器模块的隐藏内容为块级或行级盒子
- 新增邮箱API对接发件功能
- 新增文章编辑器外部页面内嵌功能
- 新增新年灯笼挂件特效
- 新增评论敏感词功能支持正则表达式验证
- 新增首页隐藏指定热门文章功能
- 新增友情链接可自定义展示位置
- 新增TurboLinks单页模式
- 新增发布文章时自定义字段可选择默认不占数据模式
- 新增文章编辑器内容一键美化（格式化）功能，可使用快捷键：Shift + Alt + F
- PC端侧栏位置新增列表标签云模块
- 优化archive页面的分页功能为Pjax加载
- 优化评论模块发送评论和分页功能为Pjax加载
- 优化首页文章列表ajax加载骨架的UI
- 修复部分服务器百度收录检测功能无效的BUG
- 修复Live2d人物失效的BUg
- 修复自定义导航栏情况下LOGO扫光功能失效的BUG
- 修复文章启用密码保护后报错的BUG
- 修复首页隐藏分类功能设置后首页文章数量不正确的BUG
- 修复文章编辑器多彩按钮和便条按钮模块在关闭文章外链转内链功能的情况下变成云盘下载模块的BUG
- 修复使用IPV6地址下单付费阅读时创建订单失败的BUG
- 修复壁纸模板数量不足以翻页时依然有翻页功能的BUG
- 修复文章编辑器全屏后代码块和宫格等功能的弹窗不显示的BUG
- toast 消息提示组件从 [qmsg](https://gitee.com/leisureLXY/qmsg) 更换为 [autolog.js](https://github.com/Auto-Plugin/autolog.js)
- 正在开发中...
- 1.33版本更新到本版本后请手动执行以下MySQL语句

```sql
-- 必须执行的代码
ALTER TABLE `typecho_friends` ADD `position` VARCHAR(255) NULL DEFAULT NULL AFTER `email`;
UPDATE `typecho_friends` SET `position`='single';
RENAME TABLE `typecho_joe_pay` to `typecho_orders`;
ALTER TABLE `typecho_orders` CHANGE `ip` `ip` VARCHAR(128);
UPDATE `typecho_fields` SET `str_value`='1' WHERE `name`='baidu_push' AND `str_value`='yes';

-- 清理主题自定义字段大量多余数据（最少可清理几百行，一般可清理几千行）
-- 没有插件或其他主题的情况下只需执行简洁代码
SELECT * FROM `blog_fields` WHERE `type`='str' AND `str_value`='';
-- 其他情况执行以下代码
DELETE FROM `typecho_fields` WHERE `name` = 'mode' AND `str_value` = 'default';
DELETE FROM `typecho_fields` WHERE `name` = 'hide' AND `str_value` = 'comment';
DELETE FROM `typecho_fields` WHERE `name` = 'price' AND `str_value` = '0.00';
DELETE FROM `typecho_fields` WHERE `name` = 'price' AND `str_value` = '0';
DELETE FROM `typecho_fields` WHERE `name` = 'pay_box_position' AND `str_value` = 'top';
DELETE FROM `typecho_fields` WHERE `name` = 'pay_tag_background' AND `str_value` = 'yellow';
DELETE FROM `typecho_fields` WHERE `name` = 'keywords' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'description' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'thumb' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'abstract' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'video' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'max_image_height' AND `str_value` = '';
DELETE FROM `typecho_fields` WHERE `name` = 'baidu_push' AND `str_value` = 'no';
DELETE FROM `typecho_fields` WHERE `name` = 'global_advert' AND `str_value` = 'display';

-- 清理主题文章未支付订单
DELETE FROM `typecho_orders` WHERE `status` = 0;
```

![phpMyAdmin执行SQL语句教程](https://shp.qpic.cn/collector/2136118039/dec4ad69-6461-4d0e-a49e-97440627940d/0)
